<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.flab.foodeats.infra.shop.ShopMapper">


    <!-- 가맹점 등록 (기본)  -->
    <insert id="registerEssentialInfo" parameterType="Essential">
        INSERT
        INTO shop_essential_info
        VALUES(#{Essential.shopId}, #{Essential.category}, #{Essential.brand}, #{Essential.location},
        #{Essential.phone});
    </insert>
    <!-- 가맹점 수정 (기본) -->
    <update id="updateEssentialInfo" parameterType="Essential">
        UPDATE shop_essential_info
        SET category = #{Essential.category}, brand = #{Essential.brand}, location = #{Essential.location},
        phone = #{Essential.phone}
        WHERE shop_id = #{Essential.shopId};
    </update>
    <!-- 가맹점 삭제 (기본) -->
    <delete id="deleteEssentialInfo" parameterType="String">
        DELETE shop_essential_info, shop_convenience_info, shop_status_info
        FROM shop_essential_info
        INNER JOIN shop_convenience_info ON shop_essential_info.shop_id = shop_convenience_info.shop_id
        INNER JOIN shop_status_info ON shop_essential_info.shop_id = shop_status_info.shop_id
        WHERE shop_essential_info.shop_id = #{shopId};
    </delete>

    <resultMap type="Essential" id="essentialMap">
        <result property="shopId" column="shop_id"/>
        <result property="category" column="category"/>
        <result property="brand" column="brand"/>
        <result property="location" column="location"/>
        <result property="phone" column="phone"/>
    </resultMap>
    <select id="findEssentialByShopId" parameterType="String" resultMap="essentialMap">
        SELECT *
        FROM shop_essential_info
        WHERE shop_id = #{shopId};
    </select>




</mapper>
